---

upgrade_packages: false
disable_ipv6: true

# set the master node that performe action or leave black to select it from the masters list using inventory var
master_initiator: 

podman:
  install: true

skopeo:
  install: true

buildah:
  install: true


# flannel or weave
pod_network: flannel

#kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
#kubectl apply -f "https://cloud.weave.works/k8s/net?k8s-version=$(kubectl version | base64 | tr -d '\n')"

# https://github.com/helm/helm/releases
helm:
  install: true
  url: "https://get.helm.sh/helm-v3.0.1-linux-amd64.tar.gz"
  add_repos: true
  update_repos: true
  bin_directory: "/usr/bin"
  repos:
    - name: "incubator"
      url: "https://kubernetes-charts-incubator.storage.googleapis.com/"
    - name: "brigade"
      url: "https://brigadecore.github.io/charts"
    - name: "bitnami"
      url: "https://charts.bitnami.com/bitnami"

# metrics_server_install_method accept "git" => {url and plugin_dir become mandatory} or "helm" => {helm_app_name become mandatory}
metrics_server:
  install_method: "helm"
  helm_app_name: "bitnami/metrics-server"
  helm_sets: "rbac.create=true,apiService.create=true"
  url: "https://github.com/kubernetes-incubator/metrics-server"
  plugin_dir: "deploy/1.8+/"


admin_cluster:
  - remove_nodes:
    - node: 192.168.41.132
      reset: true
    - node: 192.168.41.131
      reset: true
  - add_nodes:
    - node: 192.168.41.131
      type: master
    - node: 192.168.41.132
      type: worker
  - options:
      uptade: etc_hosts
      update_inventory: true



